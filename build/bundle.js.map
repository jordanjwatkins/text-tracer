{"version":3,"sources":["webpack:///webpack/bootstrap 608fe95c26dca2598bbe","webpack:///./js/animate-tracing.js","webpack:///./js/app.js","webpack:///./js/maybe-polyfill.js","webpack:///./js/animated-text-svg.js","webpack:///./js/check-svg-dash-offset-css-animation-support.js","webpack:///./js/drawing-panel.js","webpack:///./js/export-panel.js","webpack:///./js/font-change-panel.js","webpack:///./js/font-upload.js","webpack:///./js/google-fonts-autocomplete.js","webpack:///./js/google-fonts.js","webpack:///./js/options-panel.js","webpack:///./js/style-block.js","webpack:///./js/text-paths.js","webpack:///./js/index.js"],"names":["syncPathDashOffsetAnimate","paths","duration","delta","lastTimestamp","pathLength","updateHandle","initializePaths","start","stop","restart","Array","prototype","forEach","call","elPath","getTotalLength","style","strokeDashoffset","strokeDasharray","dashSpeed","update","timestamp","shouldUpdate","updatePaths","requestAnimationFrame","cancelAnimationFrame","sync","TextTracerApp","configs","initComponents","attachEventHandlers","drawConfig","drawingPanel","draw","optionsPanel","exportPanel","styleBlock","_this","fontChangePanel","elFontUpload","addEventListener","event","elFont","innerHTML","detail","fontName","fontUrl","elOptionsPanel","elDrawingPanel","setTimeout","indexOf","elForm","classList","add","remove","maybePolyfill","callback","checkSvgDashOffsetCSSAnimationSupport","svgDashOffsetCSSAnimationSupported","shouldPolyfill","loadScript","window","Promise","fetch","src","done","js","document","createElement","onload","onerror","Error","head","appendChild","makeAnimationReadyTextSvg","font","config","elSvg","makeElSvg","textPaths","userText","strokeWidth","fontSize","addSplitPaths","strokeColor","adjustSvgBoxes","id","createElementNS","setAttribute","setAttributes","parentBox","stroke","elSvgPaths","splitPaths","map","path","addPathToSvg","applySharedPathStyles","setupStrokeDashAnimation","elSvgPath","applyPathStrokeDashStyles","length","el","attributes","keys","Object","key","elSvgContainer","initialOffset","body","getComputedStyle","removeChild","DrawingPanel","assign","freshTrace","startTrace","dispatchFontLoadingEvent","dispatchFontLoadedEvent","dispatchStartTraceEvent","startLoadingFont","loadFont","cssTrace","jsTrace","updateElSvg","fontLoading","onFontLoad","bind","animateTracing","childNodes","animationDuration","dispatchEvent","CustomEvent","opentype","load","err","alert","ExportPanel","cssAnimate","isShowing","updateFileSizes","updateDownloadLink","maybeClosePanelOnBodyClick","showPanel","hidePanel","elIsPartOfPanel","jsAnimationCode","jsTraceInitCode","jsClickToRestartCode","cssClickToRestartCode","htmlStart","elExportOpen","elExportClose","elPopupPreview","preview","open","write","elSvgCopy","value","parentNode","target","select","preventDefault","focus","elAnimationTypeToggle","withDash","html","svg","XMLSerializer","serializeToString","dashedSvg","push","join","elDownloadLink","encodeURIComponent","svgLength","elSvgSize","toPrecision","elTotalSize","elExportPanel","className","animationDurationMs","backgroundColor","FontChangePanel","elChildFocus","elNextFocus","fontSelectionShowing","fontMousedown","elFontChangePanelClose","elFontChangePanel","FontUploadField","handleFontUpload","handleDragOver","handleDragLeave","handleDrop","replace","file","files","readFileUploadAsDataURL","reader","FileReader","url","result","readAsDataURL","GoogleFontsAutocompleteField","onSelect","fonts","setFonts","autoComplete","destroy","selector","minChars","source","term","suggest","choices","matches","toLowerCase","choice","GoogleFonts","autoCompleteField","onAutoCompleteChoiceSelect","fetchFonts","updateVariants","updateWeights","getFontUrl","resetGoogleFontsField","randomTerm","updateSelectedValue","optionsHtml","useFont","elGoogleFonts","elVariants","variant","elWeights","weight","elRandomFont","variants","optionValues","weights","blur","fontNames","index","Math","floor","random","values","selectedValue","options","selected","then","response","json","OptionsPanel","initChildComponents","onSubmit","googleFonts","fontUploadField","elDrawSubmit","stopPropagation","elUserText","elFontSize","Number","elStrokeWidth","elAnimationDuration","elStrokeColor","elBackgroundColor","Event","StyleBlock","elStyle","append","TextPaths","fontY","measureFontY","glyphPaths","getPaths","ascent","getParentBox","height","toPathData","split","subPath","scale","unitsPerEm","fontBoundingBoxAscent","ascender","fontBoundingBoxDescent","descender","descent","offsetX","offsetY","width","xMinMax","getXMinMax","min","max","viewBox","svgMaxX","svgMinX","box","getBoundingBox","x2","y2","x1","init","componentConfigs","getElementsByClassName","getElementsByTagName","querySelector"],"mappings":"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","file":"build/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 608fe95c26dca2598bbe","function syncPathDashOffsetAnimate(paths, duration) {\n  var delta = 0;\n  var lastTimestamp;\n  var pathLength;\n  var updateHandle;\n\n  duration = duration || 2000;\n\n  initializePaths(paths);\n  start();\n\n  return {\n    stop: stop,\n    start: start,\n    restart: restart,\n  };\n\n  function initializePaths() {\n    Array.prototype.forEach.call(paths, function (elPath) {\n      pathLength = elPath.getTotalLength();\n\n      elPath.style.strokeDashoffset = pathLength;\n      elPath.style.strokeDasharray = pathLength + ', ' + pathLength;\n\n      elPath.dashSpeed = pathLength / duration;\n    });\n  }\n\n  function update(timestamp) {\n    if (!shouldUpdate()) return;\n\n    if (lastTimestamp) {\n      delta = timestamp - lastTimestamp;\n    }\n\n    lastTimestamp = timestamp;\n\n    updatePaths();\n\n    updateHandle = requestAnimationFrame(update);\n  }\n\n  function shouldUpdate() {\n    return !(!paths[0] || paths[0].style.strokeDashoffset <= 0);\n  }\n\n  function updatePaths() {\n    Array.prototype.forEach.call(paths, function (elPath) {\n      elPath.style.strokeDashoffset -= delta * elPath.dashSpeed;\n\n      if (elPath.style.strokeDashoffset <= 0) {\n        elPath.style.strokeDashoffset = 0;\n      }\n    });\n  }\n\n  function stop() {\n    cancelAnimationFrame(updateHandle);\n  }\n\n  function start() {\n    lastTimestamp = 0;\n    updateHandle = requestAnimationFrame(update);\n  }\n\n  function restart() {\n    initializePaths(paths);\n    start();\n  }\n}\n\nexport default {\n  sync: syncPathDashOffsetAnimate,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/animate-tracing.js","import DrawingPanel from './drawing-panel';\nimport OptionsPanel from './options-panel';\nimport ExportPanel from './export-panel';\nimport StyleBlock from './style-block';\n\nfunction TextTracerApp(configs) {\n  this.initComponents(configs);\n  this.attachEventHandlers(configs.drawConfig);\n\n  this.drawConfig = configs.drawConfig;\n\n  this.drawingPanel.draw();\n}\n\nTextTracerApp.prototype = {\n  initComponents: initComponents,\n  attachEventHandlers: attachEventHandlers,\n};\n\nfunction initComponents(configs) {\n  this.optionsPanel = new OptionsPanel(configs.optionsPanel, configs.drawConfig);\n  this.drawingPanel = new DrawingPanel(configs.drawingPanel, configs.drawConfig);\n\n  this.exportPanel = new ExportPanel(configs.exportPanel, configs.drawConfig);\n  this.styleBlock = new StyleBlock(configs.drawConfig);\n}\n\nfunction attachEventHandlers(drawConfig) {\n  var _this = this;\n\n  // options panel events\n  this.optionsPanel.fontChangePanel.elFontUpload.addEventListener('uploadStart', function (event) {\n    _this.optionsPanel.fontChangePanel.elFont.innerHTML = event.detail.fontName;\n  });\n\n  this.optionsPanel.fontChangePanel.elFontUpload.addEventListener('uploadSuccess', function (event) {\n    drawConfig.fontName = event.detail.fontName;\n    drawConfig.fontUrl = event.detail.fontUrl;\n\n    _this.drawingPanel.draw();\n\n    _this.styleBlock.update();\n  });\n\n  this.optionsPanel.elOptionsPanel.addEventListener('submit', function () {\n    _this.drawingPanel.draw();\n\n    _this.styleBlock.update();\n  });\n\n  // drawing panel events\n  this.drawingPanel.elDrawingPanel.addEventListener('startTrace', function (event) {\n    _this.exportPanel.update(event.detail, false);\n\n    setTimeout(function () {\n      _this.exportPanel.update(event.detail, true);\n    }, 0); // wait for path attributes to be added/updated\n  });\n\n  this.drawingPanel.elDrawingPanel.addEventListener('fontLoading', function () {\n    if (_this.drawConfig.fontUrl.indexOf('.ttf') > -1 && _this.drawConfig.fontName === 'Lobster') return;\n\n    _this.optionsPanel.elForm.classList.add('font-loading');\n  });\n\n  this.drawingPanel.elDrawingPanel.addEventListener('fontLoaded', function () {\n    _this.optionsPanel.elForm.classList.remove('font-loading');\n  });\n}\n\nexport default TextTracerApp;\n\n\n\n// WEBPACK FOOTER //\n// ./js/app.js","import checkSvgDashOffsetCSSAnimationSupport from './check-svg-dash-offset-css-animation-support'\n\nfunction maybePolyfill(callback) {\n  checkSvgDashOffsetCSSAnimationSupport(function (svgDashOffsetCSSAnimationSupported) {\n    if (shouldPolyfill()) {\n      loadScript('https://cdn.polyfill.io/v2/polyfill.min.js?features=Promise,fetch,Object.assign,CustomEvent', function () {\n        callback(svgDashOffsetCSSAnimationSupported);\n      });\n    } else {\n      callback(svgDashOffsetCSSAnimationSupported);\n    }\n  });\n}\n\nfunction shouldPolyfill() {\n  return !(window.Promise && window.fetch);\n}\n\nfunction loadScript(src, done) {\n  var js = document.createElement('script');\n\n  js.src = src;\n\n  js.onload = function () {\n    done();\n  };\n\n  js.onerror = function () {\n    done(new Error('Failed to load script ' + src));\n  };\n\n  document.head.appendChild(js);\n}\n\nexport default maybePolyfill;\n\n\n\n// WEBPACK FOOTER //\n// ./js/maybe-polyfill.js","import TextPaths from './text-paths';\n\nfunction makeAnimationReadyTextSvg(font, config) {\n  var elSvg = makeElSvg('svg');\n  var textPaths = new TextPaths(font, config.userText, config.strokeWidth, config.fontSize);\n\n  addSplitPaths(elSvg, textPaths, config.strokeColor);\n  adjustSvgBoxes(elSvg, textPaths);\n\n  return elSvg;\n}\n\nfunction makeElSvg(id) {\n  var elSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\n  elSvg.setAttribute('id', id);\n  elSvg.setAttribute('class', 'is-tracing');\n\n  return elSvg;\n}\n\nfunction adjustSvgBoxes(elSvg, textPaths) {\n  setAttributes(elSvg, textPaths.parentBox, ['viewBox', 'width', 'height']);\n}\n\nfunction addSplitPaths(elSvg, textPaths, stroke) {\n  var elSvgPaths = textPaths.splitPaths.map(function (path) {\n    return addPathToSvg(path, elSvg);\n  });\n\n  applySharedPathStyles(elSvg, textPaths);\n\n  setupStrokeDashAnimation(elSvg, elSvgPaths, stroke);\n\n  return elSvg;\n}\n\nfunction setupStrokeDashAnimation(elSvg, elSvgPaths, stroke) {\n  setTimeout(function () {\n    elSvgPaths.forEach(function (elSvgPath) {\n      // avoid clipping in IE / Edge\n      elSvg.setAttribute('stroke', stroke);\n\n      applyPathStrokeDashStyles(elSvgPath);\n    });\n  }, 0);\n}\n\nfunction applySharedPathStyles(elSvg, textPaths) {\n  elSvg.setAttribute('stroke-width', textPaths.strokeWidth);\n  elSvg.setAttribute('stroke-linecap', 'round');\n\n  elSvg.setAttribute('fill', 'transparent');\n\n  // avoid clipping in IE / Edge\n  elSvg.setAttribute('stroke', 'transparent');\n}\n\nfunction applyPathStrokeDashStyles(elSvgPath) {\n  var length = elSvgPath.getTotalLength();\n\n  elSvgPath.setAttribute('stroke-dashoffset', length);\n  elSvgPath.setAttribute('stroke-dasharray', [length, length]);\n}\n\nfunction addPathToSvg(path, elSvg) {\n  var elSvgPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\n  elSvgPath.setAttribute('d', path);\n\n  elSvg.appendChild(elSvgPath);\n\n  return elSvgPath;\n}\n\nfunction setAttributes(el, attributes, keys) {\n  keys = keys || Object.keys(attributes);\n\n  keys.forEach(function (key) {\n    el.setAttribute(key, attributes[key]);\n  });\n}\n\nexport default makeAnimationReadyTextSvg;\n\n\n\n// WEBPACK FOOTER //\n// ./js/animated-text-svg.js","function checkSvgDashOffsetCSSAnimationSupport(callback) {\n  var elSvgContainer = document.createElement('div');\n  var elSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n  var elSvgPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n  var initialOffset;\n  var svgDashOffsetCSSAnimationSupported;\n\n  elSvgPath.setAttribute('stroke-dashoffset', 1);\n\n  elSvg.appendChild(elSvgPath);\n  elSvgContainer.appendChild(elSvg);\n  document.body.appendChild(elSvgContainer);\n\n  initialOffset = getComputedStyle(elSvgPath).strokeDashoffset;\n\n  elSvgContainer.classList.add('is-tracing');\n\n  setTimeout(function () {\n    if (getComputedStyle(elSvgPath).strokeDashoffset !== initialOffset) {\n      svgDashOffsetCSSAnimationSupported = true;\n    } else {\n      svgDashOffsetCSSAnimationSupported = false;\n    }\n\n    document.body.removeChild(elSvgContainer);\n\n    setTimeout(function () {\n      callback(svgDashOffsetCSSAnimationSupported);\n    }, 0);\n  }, 200);\n}\n\nexport default checkSvgDashOffsetCSSAnimationSupport;\n\n\n\n// WEBPACK FOOTER //\n// ./js/check-svg-dash-offset-css-animation-support.js","/* global opentype */\n\nimport makeAnimationReadyTextSvg from './animated-text-svg';\nimport animateTracing from './animate-tracing';\n\nfunction DrawingPanel(config, drawConfig) {\n  Object.assign(this, config);\n\n  this.drawConfig = drawConfig;\n\n  this.attachEventHandlers();\n}\n\nDrawingPanel.prototype = {\n  attachEventHandlers: attachEventHandlers,\n  draw: draw,\n  freshTrace: freshTrace,\n  startTrace: startTrace,\n  dispatchFontLoadingEvent: dispatchFontLoadingEvent,\n  dispatchFontLoadedEvent: dispatchFontLoadedEvent,\n  dispatchStartTraceEvent: dispatchStartTraceEvent,\n  startLoadingFont: startLoadingFont,\n  loadFont: loadFont,\n  cssTrace: cssTrace,\n  jsTrace: jsTrace,\n  updateElSvg: updateElSvg,\n};\n\nfunction attachEventHandlers() {\n  var _this = this;\n\n  this.elSvgContainer.addEventListener('click', function () {\n    _this.draw();\n  });\n}\n\nfunction draw() {\n  if (this.fontLoading) return;\n\n  if (this.font && this.drawConfig.fontUrl === this.fontUrl) {\n    this.freshTrace();\n  } else {\n    this.fontUrl = this.drawConfig.fontUrl;\n\n    this.startLoadingFont();\n  }\n}\n\nfunction freshTrace() {\n  this.updateElSvg();\n\n  this.startTrace();\n\n  this.dispatchStartTraceEvent();\n}\n\nfunction onFontLoad(font) {\n  this.fontLoading = false;\n  this.font = font;\n\n  this.dispatchFontLoadedEvent();\n\n  this.freshTrace();\n}\n\nfunction updateElSvg() {\n  this.elSvg = makeAnimationReadyTextSvg(this.font, this.drawConfig);\n\n  this.elSvgContainer.innerHTML = '';\n  this.elSvgContainer.appendChild(this.elSvg);\n}\n\nfunction startTrace() {\n  if (this.svgDashOffsetCSSAnimationSupported) {\n    this.cssTrace();\n  } else {\n    this.jsTrace();\n  }\n}\n\nfunction cssTrace() {\n  this.elSvgContainer.classList.remove('is-tracing');\n\n  setTimeout(function () {\n    this.elSvgContainer.classList.add('is-tracing');\n  }.bind(this), 0);\n}\n\nfunction jsTrace() {\n  animateTracing.sync(\n    this.elSvg.childNodes,\n    this.drawConfig.animationDuration * 1000 // seconds to milliseconds\n  );\n}\n\nfunction dispatchStartTraceEvent() {\n  this.elDrawingPanel.dispatchEvent(new CustomEvent('startTrace', { detail: this.elSvg }));\n}\n\nfunction startLoadingFont() {\n  this.fontLoading = true;\n\n  this.dispatchFontLoadingEvent();\n\n  this.loadFont(this.fontUrl, onFontLoad.bind(this));\n}\n\nfunction loadFont(fontUrl, callback) {\n  try {\n    opentype.load(fontUrl, function (err, font) {\n      if (err) {\n        alert('Font could not be loaded: ' + err);\n      } else {\n        callback(font);\n      }\n    });\n  } catch(err) {\n    alert('Font could not be loaded: ' + err);\n  }\n}\n\nfunction dispatchFontLoadingEvent() {\n  this.elDrawingPanel.dispatchEvent(new CustomEvent('fontLoading'));\n}\n\nfunction dispatchFontLoadedEvent() {\n  this.elDrawingPanel.dispatchEvent(new CustomEvent('fontLoaded'));\n}\n\nexport default DrawingPanel;\n\n\n\n// WEBPACK FOOTER //\n// ./js/drawing-panel.js","import animateTracing from './animate-tracing'\n\nfunction ExportPanel(config, drawConfig) {\n  Object.assign(this, config);\n\n  this.drawConfig = drawConfig;\n  this.cssAnimate = false;\n  this.isShowing = false;\n\n  this.attachEventHandlers();\n}\n\nExportPanel.prototype = {\n  attachEventHandlers: attachEventHandlers,\n  update: update,\n  updateFileSizes: updateFileSizes,\n  updateDownloadLink: updateDownloadLink,\n  maybeClosePanelOnBodyClick: maybeClosePanelOnBodyClick,\n  showPanel: showPanel,\n  hidePanel: hidePanel,\n  elIsPartOfPanel: elIsPartOfPanel,\n  jsAnimationCode: jsAnimationCode,\n  jsTraceInitCode: jsTraceInitCode,\n  jsClickToRestartCode: jsClickToRestartCode,\n  cssClickToRestartCode: cssClickToRestartCode,\n  htmlStart: htmlStart,\n};\n\nfunction attachEventHandlers() {\n  var _this = this;\n\n  document.body.addEventListener('click', this.maybeClosePanelOnBodyClick.bind(this));\n\n  this.elExportOpen.addEventListener('click', function () {\n    _this.showPanel();\n  });\n\n  this.elExportClose.addEventListener('click', function () {\n    _this.hidePanel();\n  });\n\n  this.elPopupPreview.addEventListener('click', function () {\n    var preview = window.open('', '_blank');\n\n    if (preview) preview.document.write(_this.elSvgCopy.value);\n  });\n\n  this.elSvgCopy.addEventListener('focus', function (event) {\n    _this.elSvgCopy.parentNode.classList.add('focus');\n\n    setTimeout(function () {\n      event.target.select();\n    }, 50);\n  });\n\n  this.elSvgCopy.addEventListener('blur', function () {\n    _this.elSvgCopy.parentNode.classList.remove('focus');\n  });\n\n  this.elSvgCopy.addEventListener('click', function (event) {\n    event.preventDefault();\n\n    _this.elSvgCopy.focus();\n  });\n\n  this.elAnimationTypeToggle.addEventListener('click', function () {\n    _this.cssAnimate = !_this.cssAnimate;\n\n    _this.update();\n  });\n}\n\nfunction update(elSvg, withDash) {\n  var html;\n  var svg;\n\n  if (elSvg) {\n    svg = new XMLSerializer().serializeToString(elSvg);\n\n    if (withDash) {\n      this.dashedSvg = svg;\n    } else {\n      this.svg = svg;\n    }\n  }\n\n  if (this.cssAnimate && !this.dashedSvg) return;\n\n  html = [\n    this.htmlStart(),\n  ];\n\n  if (this.cssAnimate) {\n    html.push(this.dashedSvg);\n    html.push(this.cssClickToRestartCode());\n  } else {\n    html.push(this.svg);\n    html.push(this.jsAnimationCode());\n  }\n\n  this.elSvgCopy.value = html.join('\\n\\n');\n\n  this.updateFileSizes();\n  this.updateDownloadLink();\n}\n\nfunction updateDownloadLink() {\n  this.elDownloadLink.setAttribute('href', 'data:text/html;charset=utf-8,' + encodeURIComponent(this.elSvgCopy.value));\n}\n\nfunction updateFileSizes() {\n  var svgLength;\n\n  svgLength = (this.cssAnimate) ? this.dashedSvg.length : this.svg.length;\n\n  this.elSvgSize.innerHTML = (svgLength / 1000).toPrecision(3);\n  this.elTotalSize.innerHTML = (this.elSvgCopy.value.length / 1000).toPrecision(3);\n}\n\nfunction showPanel() {\n  this.isShowing = true;\n  this.elExportPanel.classList.add('is-active');\n  this.elExportPanel.classList.remove('is-hidden');\n}\n\nfunction hidePanel() {\n  this.isShowing = false;\n  this.elExportPanel.classList.remove('is-active');\n\n  setTimeout(function () {\n    if (!this.isShowing) {\n      this.elExportPanel.classList.add('is-hidden');\n    }\n  }.bind(this), 600);\n}\n\nfunction maybeClosePanelOnBodyClick(event) {\n  if (!this.elIsPartOfPanel(event.target)) {\n    this.hidePanel();\n  }\n}\n\nfunction elIsPartOfPanel(el) {\n  if (el === document.body) return true;\n\n  while (el.parentNode) {\n    if (\n      typeof el.className === 'string' &&\n      el.className.indexOf('export-panel') > -1\n    ) {\n      return true;\n    }\n\n    el = el.parentNode;\n  }\n\n  return false;\n}\n\nfunction jsAnimationCode() {\n  return [\n    '<script>',\n    animateTracing.sync,\n    this.jsTraceInitCode(),\n    this.jsClickToRestartCode(),\n    '</script>',\n  ].join('\\n');\n}\n\n/* eslint-disable indent */\nfunction jsTraceInitCode() {\n  var animationDurationMs = this.drawConfig.animationDuration * 1000;\n\n  return [\n    '\\nvar elSvg = document.getElementById(\"svg\");',\n    'var elSvgPaths = elSvg.childNodes;',\n    'var animator = syncPathDashOffsetAnimate(elSvgPaths, ' + animationDurationMs + ');',\n  ].join('\\n');\n}\n\nfunction jsClickToRestartCode() {\n  return [\n    '\\nelSvg.addEventListener(\"click\", function (event) {',\n      '\\tanimator.restart();',\n    '});',\n  ].join('\\n');\n}\n\nfunction cssClickToRestartCode() {\n  return [\n    '<script>',\n    'var elSvg = document.getElementById(\"svg\");\\n',\n\n    'elSvg.addEventListener(\"click\", function (event) {',\n      '\\telSvg.classList.remove(\"is-tracing\");\\n',\n\n      '\\tsetTimeout(function () {',\n        '\\t\\telSvg.classList.add(\"is-tracing\");',\n      '\\t}, 0);',\n    '});',\n    '</script>',\n  ].join('\\n');\n}\n\nfunction htmlStart() {\n  var html = [\n    '<!DOCTYPE html>\\n',\n    '<title>Text Tracer Export</title>\\n',\n    '<style>',\n      '\\tbody { background-color: ' + this.drawConfig.backgroundColor + '; }',\n      '\\tsvg { stroke: ' + this.drawConfig.strokeColor + '; overflow: visible; }',\n  ];\n\n  if (this.cssAnimate) {\n    html.push('\\t.is-tracing path { animation: trace ' + this.drawConfig.animationDuration + 's linear forwards; }');\n    html.push('\\t@keyframes trace { to { stroke-dashoffset: 0; } }');\n  }\n\n  html.push('</style>');\n\n  return html.join('\\n');\n}\n/* eslint-enable indent */\n\nexport default ExportPanel;\n\n\n\n// WEBPACK FOOTER //\n// ./js/export-panel.js","function FontChangePanel(config, elChildFocus, elNextFocus) {\n  Object.assign(this, config);\n\n  this.elChildFocus = elChildFocus;\n  this.elNextFocus = elNextFocus;\n\n  this.fontSelectionShowing = false;\n  this.fontMousedown = false;\n\n  this.attachEventHandlers();\n}\n\nFontChangePanel.prototype = {\n  attachEventHandlers: attachEventHandlers,\n  maybeClosePanelOnBodyClick: maybeClosePanelOnBodyClick,\n  elIsPartOfPanel: elIsPartOfPanel,\n  showPanel: showPanel,\n  hidePanel: hidePanel,\n};\n\nfunction attachEventHandlers() {\n  var _this = this;\n\n  this.elFontChangePanelClose.addEventListener('click', function () {\n    _this.hidePanel();\n  });\n\n  this.elFont.addEventListener('mousedown', function () {\n    _this.fontMousedown = true;\n  });\n\n  this.elFont.addEventListener('click', function () {\n    _this.fontMousedown = false;\n\n    if (_this.fontSelectionShowing) {\n      _this.hidePanel();\n    } else {\n      _this.showPanel();\n\n      setTimeout(function () {\n        _this.elChildFocus.focus();\n      }, 200);\n    }\n  });\n\n  this.elFont.addEventListener('focus', function () {\n    if (_this.fontMousedown) return false;\n\n    _this.hidePanel();\n  });\n\n  this.elNextFocus.addEventListener('focus', function () {\n    _this.hidePanel();\n  });\n\n  document.body.addEventListener('click', function (event) {\n    _this.maybeClosePanelOnBodyClick(event);\n  });\n}\n\nfunction maybeClosePanelOnBodyClick(event) {\n  if (!this.elIsPartOfPanel(event.target)) {\n    this.hidePanel();\n  }\n}\n\nfunction elIsPartOfPanel(el) {\n  if (el === document.body) return true;\n\n  while (el.parentNode) {\n    if (\n      typeof el.className === 'string' && (\n        el.className.indexOf('font-change-panel') > -1 ||\n        el.className.indexOf('autocomplete-suggestions') > -1 ||\n        el.className.indexOf('current-font') > -1\n      )\n    ) {\n      return true;\n    }\n\n    el = el.parentNode;\n  }\n\n  return false;\n}\n\nfunction hidePanel() {\n  this.fontSelectionShowing = false;\n  this.elFontChangePanel.classList.remove('is-showing');\n}\n\nfunction showPanel() {\n  this.fontSelectionShowing = true;\n  this.elFontChangePanel.classList.add('is-showing');\n}\n\nexport default FontChangePanel;\n\n\n\n// WEBPACK FOOTER //\n// ./js/font-change-panel.js","function FontUploadField(elFontUpload) {\n  this.el = elFontUpload;\n\n  this.attachEventHandlers();\n}\n\nFontUploadField.prototype = {\n  attachEventHandlers: attachEventHandlers,\n};\n\nfunction attachEventHandlers() {\n  this.el.addEventListener('change', handleFontUpload.bind(this));\n\n  this.el.addEventListener('focus', function (event) {\n    event.target.parentNode.classList.add('focus');\n  });\n\n  this.el.addEventListener('blur', function (event) {\n    event.target.parentNode.classList.remove('focus');\n  });\n\n  this.el.addEventListener('dragover', handleDragOver, false);\n  this.el.addEventListener('dragleave', handleDragLeave, false);\n  this.el.addEventListener('drop', handleDrop, false);\n}\n\nfunction handleDragOver(event) {\n  event.target.parentNode.classList.add('focus');\n}\n\nfunction handleDragLeave(event) {\n  event.target.parentNode.classList.remove('focus');\n}\n\nfunction handleDrop(event) {\n  event.target.parentNode.classList.remove('focus');\n}\n\nfunction handleFontUpload(event) {\n  var _this = this;\n\n  var fontName = event.target.value\n    .replace(/.*\\\\/, '')\n    .replace(/\\..*/, '');\n\n  var file = event.target.files[0];\n\n  readFileUploadAsDataURL(file, function (fontUrl) {\n    _this.el.dispatchEvent(new CustomEvent('uploadSuccess', {\n      detail: {\n        fontName: fontName,\n        fontUrl: fontUrl,\n      },\n    }));\n  });\n\n  this.el.dispatchEvent(new CustomEvent('uploadStart', {\n    detail: {\n      fontName: fontName,\n    },\n  }));\n\n  event.target.value = '';\n}\n\nfunction readFileUploadAsDataURL(file, callback) {\n  var reader = new FileReader();\n\n  reader.onload = function (event) {\n    var url = event.target.result;\n\n    callback(url);\n  }\n\n  reader.readAsDataURL(file);\n}\n\nexport default FontUploadField;\n\n\n\n// WEBPACK FOOTER //\n// ./js/font-upload.js","/* global autoComplete */\n\nfunction GoogleFontsAutocompleteField(onSelect, fonts) {\n  this.onSelect = onSelect;\n  this.setFonts(fonts);\n}\n\nGoogleFontsAutocompleteField.prototype = {\n  setFonts: setFonts,\n};\n\nfunction setFonts(fonts) {\n  if (this.autoComplete && typeof this.autoComplete.destroy === 'function') {\n    this.autoComplete.destroy();\n  }\n\n  this.autoComplete = new autoComplete({\n    selector: '[name=google-fonts]',\n    minChars: 1,\n    source: function (term, suggest) {\n      var choices = Object.keys(fonts);\n      var matches = [];\n\n      term = term.toLowerCase();\n\n      choices.forEach(function (choice) {\n        if (choice.toLowerCase().indexOf(term) === 0) {\n          matches.push(choice);\n        }\n      });\n\n      suggest(matches);\n    },\n\n    onSelect: this.onSelect,\n  });\n}\n\nexport default GoogleFontsAutocompleteField;\n\n\n\n// WEBPACK FOOTER //\n// ./js/google-fonts-autocomplete.js","import GoogleFontsAutocompleteField from './google-fonts-autocomplete';\n\nfunction GoogleFonts(config) {\n  Object.assign(this, config);\n\n  this.attachEventHandlers();\n\n  this.autoCompleteField = new GoogleFontsAutocompleteField(\n    onAutoCompleteChoiceSelect.bind(this),\n    this.fonts\n  );\n\n  this.fetchFonts();\n}\n\nGoogleFonts.prototype = {\n  updateVariants: updateVariants,\n  updateWeights: updateWeights,\n  getFontUrl: getFontUrl,\n  resetGoogleFontsField: resetGoogleFontsField,\n  randomTerm: randomTerm,\n  updateSelectedValue: updateSelectedValue,\n  optionsHtml: optionsHtml,\n  useFont: useFont,\n  fetchFonts: fetchFonts,\n  attachEventHandlers: attachEventHandlers,\n}\n\nfunction attachEventHandlers() {\n  var _this = this;\n\n  // accept valid font typed into field without selecting via autocomplete\n  // ex. typing exact font name and pressing enter\n  this.elGoogleFonts.addEventListener('change', function (event) {\n    if (!_this.fonts[event.target.value]) return;\n\n    _this.fontName = event.target.value;\n  });\n\n  this.elVariants.addEventListener('change', function () {\n    _this.variant = this.value;\n\n    _this.updateWeights();\n  });\n\n  this.elWeights.addEventListener('change', function () {\n    _this.weight = this.value;\n  });\n\n  this.elRandomFont.addEventListener('click', function () {\n    _this.fontName = _this.randomTerm();\n\n    _this.useFont();\n  });\n}\n\nfunction onAutoCompleteChoiceSelect(event, term) {\n  this.fontName = term;\n\n  this.useFont();\n}\n\nfunction useFont() {\n  if (!this.fonts[this.fontName]) return false;\n\n  this.resetGoogleFontsField();\n\n  this.updateVariants();\n  this.updateWeights();\n\n  this.fontUrl = this.getFontUrl();\n\n  this.elGoogleFonts.dispatchEvent(new CustomEvent('useFont'));\n}\n\nfunction updateVariants() {\n  var variants, optionValues;\n\n  if (!this.fonts[this.fontName]) return false;\n\n  variants = this.fonts[this.fontName]['variants'];\n  optionValues = Object.keys(variants);\n\n  this.variant = this.updateSelectedValue(optionValues, this.variant);\n\n  this.elVariants.innerHTML = this.optionsHtml(optionValues, this.variant);\n}\n\nfunction updateWeights() {\n  var weights, optionValues;\n\n  if (!this.fonts[this.fontName]) return false;\n\n  weights = this.fonts[this.fontName]['variants'][this.variant];\n  optionValues = Object.keys(weights);\n\n  this.weight = updateSelectedValue(optionValues, this.weight);\n\n  this.elWeights.innerHTML = optionsHtml(optionValues, this.weight);\n}\n\nfunction getFontUrl() {\n  return this.fonts[this.fontName]['variants'][this.variant][this.weight]['url']['woff'];\n}\n\nfunction resetGoogleFontsField() {\n  this.elGoogleFonts.value = '';\n\n  this.elGoogleFonts.blur();\n  this.elGoogleFonts.focus();\n}\n\nfunction randomTerm() {\n  var fontNames = Object.keys(this.fonts);\n  var index = Math.floor(Math.random() * fontNames.length);\n\n  return fontNames[index];\n}\n\nfunction updateSelectedValue(values, selectedValue) {\n  if (values.indexOf(selectedValue) > -1) {\n    selectedValue = values[values.indexOf(selectedValue)];\n  } else {\n    selectedValue = values[0];\n  }\n\n  return selectedValue;\n}\n\nfunction optionsHtml(options, selectedValue) {\n  var selected = '';\n\n  return options.map(function (value) {\n    selected = (selectedValue === value) ? ' selected' : '';\n\n    return '<option value=\"' + value + '\"' + selected + '>' + value + '</option>';\n  }).join('');\n}\n\nfunction fetchFonts() {\n  var _this = this;\n\n  fetch('./google-fonts.json').then(function (response) {\n    return response.json();\n  }).then(function (fonts) {\n    _this.fonts = fonts;\n    _this.autoCompleteField.setFonts(fonts);\n  });\n}\n\nexport default GoogleFonts;\n\n\n\n// WEBPACK FOOTER //\n// ./js/google-fonts.js","import FontChangePanel from './font-change-panel';\nimport FontUploadField from './font-upload';\nimport GoogleFonts from './google-fonts';\n\nfunction OptionsPanel(config, drawConfig) {\n  Object.assign(this, config);\n\n  this.drawConfig = drawConfig;\n\n  this.initChildComponents(config);\n  this.attachEventHandlers();\n}\n\nOptionsPanel.prototype = {\n  attachEventHandlers: attachEventHandlers,\n  initChildComponents: initChildComponents,\n  useFont: useFont,\n  onSubmit: onSubmit,\n};\n\nfunction initChildComponents(config) {\n  this.fontChangePanel = new FontChangePanel(config.fontChangePanel, config.googleFonts.elGoogleFonts, config.googleFonts.elVariants);\n  this.fontUploadField = new FontUploadField(config.fontChangePanel.elFontUpload);\n  this.googleFonts = new GoogleFonts(config.googleFonts);\n}\n\nfunction attachEventHandlers() {\n  var _this = this;\n\n  this.elForm.addEventListener('submit', function (event) {\n    event.preventDefault();\n\n    _this.onSubmit(event);\n  });\n\n  this.elDrawSubmit.addEventListener('click', function (event) {\n    // prevent the font change panel closing on form submit\n    // submit triggers a click on the submit button whech propagates to the body\n    event.stopPropagation();\n  });\n\n  this.elUserText.addEventListener('change', function () {\n    _this.drawConfig.userText = this.value;\n  });\n\n  this.elFontSize.addEventListener('change', function () {\n    _this.drawConfig.fontSize = Number(this.value);\n  });\n\n  this.elStrokeWidth.addEventListener('change', function () {\n    _this.drawConfig.strokeWidth = Number(this.value);\n  });\n\n  this.elAnimationDuration.addEventListener('change', function () {\n    _this.drawConfig.animationDuration = Number(this.value);\n  });\n\n  this.elStrokeColor.addEventListener('change', function (event) {\n    _this.drawConfig.strokeColor = '#' + event.target.value;\n  });\n\n  this.elBackgroundColor.addEventListener('change', function (event) {\n    _this.drawConfig.backgroundColor = '#' + event.target.value;\n  });\n\n  this.googleFonts.elGoogleFonts.addEventListener('useFont', function () {\n    _this.useFont(\n      _this.googleFonts.fontName,\n      _this.googleFonts.fontUrl\n    );\n  });\n}\n\nfunction onSubmit(event) {\n  if (this.googleFonts.fonts[this.drawConfig.fontName]) {\n    event.stopPropagation();\n\n    // in case initially loaded font is a google font\n    this.googleFonts.fontName = this.drawConfig.fontName;\n\n    this.googleFonts.useFont();\n  } else {\n    this.useFont(\n      this.drawConfig.fontName,\n      this.drawConfig.fontUrl\n    );\n  }\n}\n\nfunction useFont(fontName, fontUrl) {\n  this.drawConfig.fontName = fontName;\n  this.drawConfig.fontUrl = fontUrl;\n\n  this.fontChangePanel.elFont.innerHTML = fontName;\n\n  this.elOptionsPanel.dispatchEvent(new Event('submit'));\n}\n\nexport default OptionsPanel;\n\n\n\n// WEBPACK FOOTER //\n// ./js/options-panel.js","function StyleBlock(drawConfig) {\n  this.elStyle = document.createElement('style');\n\n  this.drawConfig = drawConfig;\n\n  this.append();\n}\n\nStyleBlock.prototype = {\n  update: update,\n  append: append,\n}\n\nfunction append() {\n  document.body.appendChild(this.elStyle);\n}\n\nfunction update() {\n  this.elStyle.innerHTML = [\n    /* eslint-disable indent */\n    '@font-face {',\n      '\\tsrc: url(\"'+ this.drawConfig.fontUrl + '\");',\n      '\\tfont-family: \"' + this.drawConfig.fontName + '\";',\n      '\\tfont-style: normal;',\n      '\\tfont-weight: normal;',\n      '\\tunicode-range: U+00-FFFF;',\n    '}',\n\n    '.current-font__name,',\n    '.options-panel__heading {',\n      '\\tfont-family: \"' + this.drawConfig.fontName + '\";',\n    '}',\n\n    'body {',\n      '\\tbackground-color: ' + this.drawConfig.backgroundColor + ';',\n    '}',\n\n    '.is-tracing path {',\n      '\\tanimation: dash ' + this.drawConfig.animationDuration + 's linear forwards;',\n    '}',\n    /* eslint-enable indent */\n  ].join('\\n');\n}\n\nexport default StyleBlock;\n\n\n\n// WEBPACK FOOTER //\n// ./js/style-block.js","function TextPaths(font, userText, strokeWidth, fontSize) {\n  var fontY = measureFontY(font, fontSize);\n\n  var glyphPaths = font.getPaths(\n    userText,\n    0,\n    fontY.ascent,\n    fontSize\n  );\n\n  var parentBox = getParentBox(\n    glyphPaths,\n    fontY.height,\n    strokeWidth,\n    fontSize\n  );\n\n  return {\n    glyphPaths: glyphPaths,\n    splitPaths: splitPaths(glyphPaths),\n    fontY: fontY,\n    parentBox: parentBox,\n    fontSize: fontSize,\n    strokeWidth: strokeWidth,\n  };\n}\n\nfunction splitPaths(paths) {\n  var splitPaths = [];\n\n  paths.forEach(function (path) {\n    path.toPathData().split('M').forEach(function (subPath) {\n      if (!subPath) return;\n\n      splitPaths.push('M'+ subPath);\n    });\n  });\n\n  return splitPaths;\n}\n\nfunction measureFontY(font, fontSize) {\n  var scale = 1 / font.unitsPerEm * fontSize;\n\n  var fontBoundingBoxAscent = font.ascender * scale;\n  var fontBoundingBoxDescent = font.descender * scale;\n\n  return {\n    height: fontBoundingBoxAscent - fontBoundingBoxDescent,\n    ascent: fontBoundingBoxAscent,\n    descent: fontBoundingBoxDescent,\n  };\n}\n\nfunction getParentBox(glyphPaths, height, strokeWidth, fontSize) {\n  var offsetX, offsetY, width;\n\n  var xMinMax = getXMinMax(glyphPaths);\n\n  offsetX = xMinMax.min - (strokeWidth / 2) - 5;\n  width = xMinMax.max + (strokeWidth / 2) - offsetX + 5;\n\n  offsetY = -strokeWidth - fontSize / 15;\n  height = height - offsetY + strokeWidth * 2;\n\n  return {\n    offsetX: offsetX,\n    offsetY: offsetY,\n    width: width,\n    height: height,\n    viewBox: [\n      offsetX,\n      offsetY,\n      width,\n      height,\n    ].join(' '),\n  };\n}\n\nfunction getXMinMax(glyphPaths) {\n  var svgMaxX, svgMinX, box;\n\n  Array.prototype.forEach.call(glyphPaths, function (path) {\n    box = path.getBoundingBox();\n\n    // ignore space characters\n    if (box.x2 === 0 && box.y2 === 0) return;\n\n    if (!svgMaxX || box.x2 > svgMaxX) svgMaxX = box.x2;\n    if (!svgMinX || box.x1 < svgMinX) svgMinX = box.x1;\n  });\n\n  return {\n    min: svgMinX,\n    max: svgMaxX,\n  };\n}\n\nexport default TextPaths;\n\n\n\n// WEBPACK FOOTER //\n// ./js/text-paths.js","import TextTracer from './app';\nimport maybePolyfill from './maybe-polyfill';\n\nmaybePolyfill(init);\n\nfunction init(svgDashOffsetCSSAnimationSupported) {\n  var configs = componentConfigs(\n    document.getElementsByClassName('drawing-panel')[0],\n    document.getElementsByClassName('options-panel')[0],\n    svgDashOffsetCSSAnimationSupported\n  );\n\n  return new TextTracer(configs);\n}\n\nfunction componentConfigs(elDrawingPanel, elOptionsPanel, svgDashOffsetCSSAnimationSupported) {\n  return {\n    drawConfig: {\n      userText: 'Hello world!',\n      fontUrl: 'http://fonts.gstatic.com/s/lobster/v18/TSDaXhyJuDJ-NBU0popSWA.ttf',\n      fontName: 'Lobster',\n      fontSize: 182,\n      strokeWidth: 3,\n      animationDuration: 4,\n      strokeColor: '#F5F3F5',\n      backgroundColor: '#576CA8',\n    },\n\n    drawingPanel: {\n      elDrawingPanel: elDrawingPanel,\n      elSvgContainer: elDrawingPanel.getElementsByClassName('svg-container')[0],\n      svgDashOffsetCSSAnimationSupported: svgDashOffsetCSSAnimationSupported,\n    },\n\n    optionsPanel: {\n      elOptionsPanel: elOptionsPanel,\n      elForm: elOptionsPanel.getElementsByTagName('form')[0],\n      elUserText: elOptionsPanel.querySelector('[name=user-text]'),\n      elFontSize: elOptionsPanel.querySelector('[name=font-size]'),\n      elStrokeWidth: elOptionsPanel.querySelector('[name=stroke-width]'),\n      elAnimationDuration: elOptionsPanel.querySelector('[name=animation-duration]'),\n      elStrokeColor: elOptionsPanel.querySelector('[name=stroke-color]'),\n      elBackgroundColor: elOptionsPanel.querySelector('[name=background-color]'),\n      elDrawSubmit: elOptionsPanel.querySelector('[type=submit]'),\n\n      fontChangePanel: {\n        elFont: elOptionsPanel.querySelector('[name=current-font'),\n        elFontChangePanel: elOptionsPanel.querySelector('.font-change-panel'),\n        elFontChangePanelClose: elOptionsPanel.querySelector('.font-change-panel .js-close'),\n        elFontUpload: elOptionsPanel.querySelector('[name=font-upload'),\n      },\n\n      googleFonts: {\n        elGoogleFonts: elOptionsPanel.querySelector('[name=google-fonts]'),\n        elRandomFont: elOptionsPanel.querySelector('[name=random-font]'),\n        elVariants: elOptionsPanel.querySelector('[name=variants]'),\n        elWeights: elOptionsPanel.querySelector('[name=weights]'),\n        variant: 'normal',\n        weight: '400',\n        fonts: {},\n      },\n    },\n\n    exportPanel: {\n      elExportPanel: document.querySelector('.export-panel'),\n      elExportOpen: document.querySelector('.export-panel__open'),\n      elExportClose: document.querySelector('.export-panel__close'),\n      elSvgCopy: document.querySelector('.export-panel__svg-copy'),\n      elPopupPreview: document.querySelector('.export-panel__pop-up-preview'),\n      elDownloadLink: document.querySelector('.export-panel__download'),\n      elAnimationTypeToggle: document.querySelector('[name=use-js-animation]'),\n      elSvgSize: document.querySelector('.js-svg-size'),\n      elTotalSize: document.querySelector('.js-total-size'),\n    },\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/index.js"],"sourceRoot":""}